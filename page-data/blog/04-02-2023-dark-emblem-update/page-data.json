{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/04-02-2023-dark-emblem-update/","result":{"data":{"site":{"siteMetadata":{"title":"Capsule Cat"}},"mdx":{"id":"e0594643-9dda-5611-9c04-88b37297456d","excerpt":"Going into 2023, Dark Emblem - an NFT card game where you can collect cards and participate in raids – was having a few issues. Keeping the UI application in…","body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"Dark Emblem Rewrite\",\n  \"date\": \"2023-04-02T00:00:00.000Z\",\n  \"color\": \"white\",\n  \"backgroundColor\": \"rgb(19, 27, 38)\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Going into 2023, Dark Emblem - an NFT card game where you can collect cards and participate in raids\\xA0\\u2013 was having a few issues. Keeping the UI application in sync with the latest blockchain blocks was turning out to be difficult.\"), mdx(\"p\", null, \"Users were reporting that while the WAX Dark Emblem contact was working correctly, the UI would show the incorrect state of their cards. Even if the blockchain is working correctly, not showing that cards had been transferred to their owners because of syncing issues did not bring any peace of mind.\"), mdx(\"h2\", null, \"Server issues\"), mdx(\"p\", null, \"What exact issues were we experiencing? The problems with inconsistent data can be split into two parts: bad APIs, and a pull mechanism to sync data from the blockchain. There are multiple WAX blockchain nodes that can be queries via a REST API. The issue here is that these nodes are community maintained, which means some nodes end up being outdated and not offering the most up-to-date APIs, some nodes end up randomly going down, and some nodes end up adding their own rate-limits. This made displaying data on the UI a big issue, since it was it out of our control on how stable the APIs we used to query blockchain state were.\"), mdx(\"p\", null, \"We also had an issue where we would pull data from any available WAX API nodes on a set interval, but because of the nodes\\u2019 instabilities, combined with some nodes being out of date, we would have to rely on APIs that were generally available. This came with its own set of issues, where older APIs were difficult to consume, especially for traversing the blockchain history.\"), mdx(\"p\", null, \"Combating these issues was two-fold. One, we now let users pick their preferred WAX API node when they log in. This is similar to how other WAX based games behave as well.\"), mdx(\"p\", null, \"The other issue was that we relied on a pull mechanism. This has been completely replaced with using a push based mechanism via dfuse API. A lot of the work on our dfuse integration was built upon some joint work we did with another WAX discord server.\"), mdx(\"h2\", null, \"UI problems\"), mdx(\"p\", null, \"The original UI was built as a set of single page applications. While this let us iterate quickly and deploy new app like our marketing site, dapp, and docs, it showed quite a few problems as we continued building.\"), mdx(\"p\", null, \"Sharing and interacting with the community is a huge part of any blockchain project. The issue is that single page applications built with create-react-app don\\u2019t provide a mechanism to set the social share data that is necessary to have links show up with nice previews. So when a user went to share their awesome new card, all the preview showed was the main page\\u2019s default title and description.\"), mdx(\"p\", null, \"I mentioned that we had a marketing site, a dapp, and a docs site. Each one of these was a separate application that was deployed independently. The Dark Emblem team is small, and this level of complexity was getting difficult to maintain.\"), mdx(\"p\", null, \"We migrated the three single page applications to a single NextJS application that we use to partially server side render our application. This new structure lets us deploy one application that servers all of our needs for our UI, but still only sends the JS necessary to hydrate the page and make it interactive.\"), mdx(\"h2\", null, \"Technical challenges\"), mdx(\"p\", null, \"Our other struggles have been more general: the applications and services getting hard to maintain and deploy, harder to split up parts of the application and still maintain code, and it getting harder to maintain costs.\"), mdx(\"p\", null, \"While each one of these required a lot of technical work to restructure the code with NextJS and with our new server package called propel, another major change was moving from Lerna to Nx. Nx let us split up our services into modules that we could re-use and deploy.\"), mdx(\"h2\", null, \"Propelling forward\"), mdx(\"p\", null, \"There was a lot of work throughout 2022 to 2023 to rewrite Dark Emblem to where it is today. We simplified our services to keep costs down. Nx let us split our application up into re-usable modules, simplifying our dev workflow. NextJS let us create a UI application to better suit our use-cases. And dfuse let us build a more realtime experience for our applications.\"), mdx(\"p\", null, \"We are looking forward to a great 2023 and beyond!\"), mdx(\"p\", null, \"Join us on \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.darkemblem.com\"\n  }, \"Dark Emblem\"), \".\"), mdx(\"h2\", null, \"Related articles\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://www.darkemblem.com/blog/post/2023-04-02-new-site-released\"\n  }, \"Dark Emblem Blog Announcement\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://idmontie.github.io/blog/post/2023-04-02-dark-emblem-rewrite\"\n  }, \"Technical Announcement\"))));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Dark Emblem Rewrite","date":"April 02, 2023","description":null,"noTitle":null,"image":null},"fields":{"slug":"/blog/04-02-2023-dark-emblem-update/"}}},"pageContext":{"slug":"/blog/04-02-2023-dark-emblem-update/","previous":{"id":"650498a2-3661-5d8b-964d-7664adcc1c00","body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"Dark Emblem\",\n  \"date\": \"2022-02-22T00:00:00.000Z\",\n  \"color\": \"white\",\n  \"backgroundColor\": \"rgb(19, 27, 38)\",\n  \"image\": \"./blog-splash.png\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", null, \"Announcing Dark Emblem\"), mdx(\"p\", null, \"Dark Emblem is a collectible card game using NFT technology.\"), mdx(\"h3\", null, \"Welcome to the Emblemverse\"), mdx(\"p\", null, \"Dark Emblem is an online trading card game based on blockchain technology. You can open packs, collect cards, and ascend them to create your perfect Hero \\u2013 all on the WAX blockchain.\"), mdx(\"h3\", null, \"Collect $DREM\"), mdx(\"p\", null, \"$DREM is our token that you can use to Ascend and Transmogrify cards! Earn $DREM every season, and use it to buy cards.\"), mdx(\"h3\", null, \"Promos and Auctions\"), mdx(\"p\", null, \"Get special promo cards at the start of each Season. Create and participate in communicate auctions as well!\"), mdx(\"h3\", null, \"Ascend and Transmogrify\"), mdx(\"p\", null, \"Take your cards and create even better ones by Ascending them together! Ascend 2 Hero cards to get a new Hero card.\"), mdx(\"p\", null, \"Read more on our \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/games/darkemblem\"\n  }, \"Game Page\"), \".\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Announcing Dark Emblem Dark Emblem is a collectible card game using NFT technology. Welcome to the Emblemverse Dark Emblem is an online…","frontmatter":{"title":"Dark Emblem","description":null,"date":"22 February, 2022","color":"white","backgroundColor":"rgb(19, 27, 38)","image":{"publicURL":"/static/dfd9eea1be9bd3513a47653f4737d1f2/blog-splash.png","childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC20lEQVQozx2PX1ALcACAf7gjnMuflBSRNOKyZPMvq3TpzibaylJDqVnZDSv9c1oMNWX90VaRNea2FCFHlyshx4md45w/h6M356035+nTefhevofv7hPJcdtRrN5I4opY0tfGY83NZLTPw2BbHe/qc3hv0/Kho5y3vov0mxQM1BupMWiJmTeP6NnBLJwSSMiM+UQFhrN4VhBiXYgElTSBPEMJyklUxxvw2m347YVMuNJ5a9cydr2FoTojXy7p+HG/g+Ebds4cSCchOpKwZYuQhK1EMieCiKkhCMWSZUjkaSwcnCDjoR+F/w/mgkJ+Ogt4UB5HedVZnvk/crXzGk9PZ/HrSil3LUW8utmB0aJF5AgU1dtodjYybZVAFK63oDs6imFklOrLTuK+T1Cs09CVo+BQSizGCivPngxTea6F1uyl/G1M4s4JHWMeJ1vKpIgsgX3IjtvvRmRMBj0JPdRUuKi6bqX/fBKtnx/hqMhjuFhOzc5oUndm4ujqZrcml27NXGhT86mxgp6GSubr5yJyBW++v0bpULE8bSni3g4zNqUGmTGN/Bo1+rNaLDolI+ZEvtUquGFU4DiWhStfxljxYnDn87u1nKrDW5leGICsdAOZTRrCSsJITpIjTmWfZMDspWt/FU1aPQZDAfXVk851iUeedkZvXmF88CpfBzp54a1j/KGD8TsOGpxHCTgSiLJWhappF2KPYNuqOERyyl7M1nb06iJMmkPYrXVcuNiMo8P1n+cjj3nQf5u+Xi993R56fV6e3/fRe9nC+vQojOfyyajVkFAspaWsEiGN3MCW+B1EBi0nMjAUWVQsqfJEdEo1pbpc3GUHaTWpcRhS8ZlS+dKs5qf7JL4SNS5TNp/aKumpLeK2zUSjfh9iTegaYoKjiZgTSvjMIJYELEAaKiFDvh1tvIys+Bj2bw6naFMwmTELuJUXxMvqFPzOU5P7XYwPeXnTbmGs00aZRsk/mA7IyL361KUAAAAASUVORK5CYII=","aspectRatio":2.048,"src":"/static/dfd9eea1be9bd3513a47653f4737d1f2/a8378/blog-splash.png","srcSet":"/static/dfd9eea1be9bd3513a47653f4737d1f2/61fd6/blog-splash.png 256w,\n/static/dfd9eea1be9bd3513a47653f4737d1f2/6fe88/blog-splash.png 513w,\n/static/dfd9eea1be9bd3513a47653f4737d1f2/a8378/blog-splash.png 1024w","sizes":"(max-width: 1024px) 100vw, 1024px"},"fixed":{"src":"/static/dfd9eea1be9bd3513a47653f4737d1f2/a8378/blog-splash.png","width":1024,"height":500}}}},"fields":{"slug":"/blog/02-23-2022-dark-emblem/"}},"next":null,"site":{"siteMetadata":{"siteUrl":"https://capsulecat.com"}},"node":{"id":"e0594643-9dda-5611-9c04-88b37297456d","body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"Dark Emblem Rewrite\",\n  \"date\": \"2023-04-02T00:00:00.000Z\",\n  \"color\": \"white\",\n  \"backgroundColor\": \"rgb(19, 27, 38)\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Going into 2023, Dark Emblem - an NFT card game where you can collect cards and participate in raids\\xA0\\u2013 was having a few issues. Keeping the UI application in sync with the latest blockchain blocks was turning out to be difficult.\"), mdx(\"p\", null, \"Users were reporting that while the WAX Dark Emblem contact was working correctly, the UI would show the incorrect state of their cards. Even if the blockchain is working correctly, not showing that cards had been transferred to their owners because of syncing issues did not bring any peace of mind.\"), mdx(\"h2\", null, \"Server issues\"), mdx(\"p\", null, \"What exact issues were we experiencing? The problems with inconsistent data can be split into two parts: bad APIs, and a pull mechanism to sync data from the blockchain. There are multiple WAX blockchain nodes that can be queries via a REST API. The issue here is that these nodes are community maintained, which means some nodes end up being outdated and not offering the most up-to-date APIs, some nodes end up randomly going down, and some nodes end up adding their own rate-limits. This made displaying data on the UI a big issue, since it was it out of our control on how stable the APIs we used to query blockchain state were.\"), mdx(\"p\", null, \"We also had an issue where we would pull data from any available WAX API nodes on a set interval, but because of the nodes\\u2019 instabilities, combined with some nodes being out of date, we would have to rely on APIs that were generally available. This came with its own set of issues, where older APIs were difficult to consume, especially for traversing the blockchain history.\"), mdx(\"p\", null, \"Combating these issues was two-fold. One, we now let users pick their preferred WAX API node when they log in. This is similar to how other WAX based games behave as well.\"), mdx(\"p\", null, \"The other issue was that we relied on a pull mechanism. This has been completely replaced with using a push based mechanism via dfuse API. A lot of the work on our dfuse integration was built upon some joint work we did with another WAX discord server.\"), mdx(\"h2\", null, \"UI problems\"), mdx(\"p\", null, \"The original UI was built as a set of single page applications. While this let us iterate quickly and deploy new app like our marketing site, dapp, and docs, it showed quite a few problems as we continued building.\"), mdx(\"p\", null, \"Sharing and interacting with the community is a huge part of any blockchain project. The issue is that single page applications built with create-react-app don\\u2019t provide a mechanism to set the social share data that is necessary to have links show up with nice previews. So when a user went to share their awesome new card, all the preview showed was the main page\\u2019s default title and description.\"), mdx(\"p\", null, \"I mentioned that we had a marketing site, a dapp, and a docs site. Each one of these was a separate application that was deployed independently. The Dark Emblem team is small, and this level of complexity was getting difficult to maintain.\"), mdx(\"p\", null, \"We migrated the three single page applications to a single NextJS application that we use to partially server side render our application. This new structure lets us deploy one application that servers all of our needs for our UI, but still only sends the JS necessary to hydrate the page and make it interactive.\"), mdx(\"h2\", null, \"Technical challenges\"), mdx(\"p\", null, \"Our other struggles have been more general: the applications and services getting hard to maintain and deploy, harder to split up parts of the application and still maintain code, and it getting harder to maintain costs.\"), mdx(\"p\", null, \"While each one of these required a lot of technical work to restructure the code with NextJS and with our new server package called propel, another major change was moving from Lerna to Nx. Nx let us split up our services into modules that we could re-use and deploy.\"), mdx(\"h2\", null, \"Propelling forward\"), mdx(\"p\", null, \"There was a lot of work throughout 2022 to 2023 to rewrite Dark Emblem to where it is today. We simplified our services to keep costs down. Nx let us split our application up into re-usable modules, simplifying our dev workflow. NextJS let us create a UI application to better suit our use-cases. And dfuse let us build a more realtime experience for our applications.\"), mdx(\"p\", null, \"We are looking forward to a great 2023 and beyond!\"), mdx(\"p\", null, \"Join us on \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.darkemblem.com\"\n  }, \"Dark Emblem\"), \".\"), mdx(\"h2\", null, \"Related articles\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://www.darkemblem.com/blog/post/2023-04-02-new-site-released\"\n  }, \"Dark Emblem Blog Announcement\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://idmontie.github.io/blog/post/2023-04-02-dark-emblem-rewrite\"\n  }, \"Technical Announcement\"))));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Going into 2023, Dark Emblem - an NFT card game where you can collect cards and participate in raids – was having a few issues. Keeping the…","frontmatter":{"title":"Dark Emblem Rewrite","description":null,"date":"02 April, 2023","color":"white","backgroundColor":"rgb(19, 27, 38)","image":null},"fields":{"slug":"/blog/04-02-2023-dark-emblem-update/"}}}},"staticQueryHashes":["2841359383","606982168"]}