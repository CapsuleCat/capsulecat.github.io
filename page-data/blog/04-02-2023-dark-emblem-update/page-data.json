{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/04-02-2023-dark-emblem-update/","result":{"data":{"site":{"siteMetadata":{"title":"Capsule Cat"}},"mdx":{"id":"e0594643-9dda-5611-9c04-88b37297456d","excerpt":"Going into 2023, Dark Emblem - an NFT card game where you can collect cards and participate in raids – was having a few issues. Keeping the UI application in…","body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"Dark Emblem Rewrite\",\n  \"date\": \"2023-04-02T00:00:00.000Z\",\n  \"color\": \"white\",\n  \"backgroundColor\": \"rgb(19, 27, 38)\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Going into 2023, Dark Emblem - an NFT card game where you can collect cards and participate in raids\\xA0\\u2013 was having a few issues. Keeping the UI application in sync with the latest blockchain blocks was turning out to be difficult.\"), mdx(\"p\", null, \"Users were reporting that while the WAX Dark Emblem contact was working correctly, the UI would show the incorrect state of their cards. Even if the blockchain is working correctly, not showing that cards had been transferred to their owners because of syncing issues did not bring any peace of mind.\"), mdx(\"h2\", null, \"Server issues\"), mdx(\"p\", null, \"What exact issues were we experiencing? The problems with inconsistent data can be split into two parts: bad APIs, and a pull mechanism to sync data from the blockchain. There are multiple WAX blockchain nodes that can be queries via a REST API. The issue here is that these nodes are community maintained, which means some nodes end up being outdated and not offering the most up-to-date APIs, some nodes end up randomly going down, and some nodes end up adding their own rate-limits. This made displaying data on the UI a big issue, since it was it out of our control on how stable the APIs we used to query blockchain state were.\"), mdx(\"p\", null, \"We also had an issue where we would pull data from any available WAX API nodes on a set interval, but because of the nodes\\u2019 instabilities, combined with some nodes being out of date, we would have to rely on APIs that were generally available. This came with its own set of issues, where older APIs were difficult to consume, especially for traversing the blockchain history.\"), mdx(\"p\", null, \"Combating these issues was two-fold. One, we now let users pick their preferred WAX API node when they log in. This is similar to how other WAX based games behave as well.\"), mdx(\"p\", null, \"The other issue was that we relied on a pull mechanism. This has been completely replaced with using a push based mechanism via dfuse API. A lot of the work on our dfuse integration was built upon some joint work we did with another WAX discord server.\"), mdx(\"h2\", null, \"UI problems\"), mdx(\"p\", null, \"The original UI was built as a set of single page applications. While this let us iterate quickly and deploy new app like our marketing site, dapp, and docs, it showed quite a few problems as we continued building.\"), mdx(\"p\", null, \"Sharing and interacting with the community is a huge part of any blockchain project. The issue is that single page applications built with create-react-app don\\u2019t provide a mechanism to set the social share data that is necessary to have links show up with nice previews. So when a user went to share their awesome new card, all the preview showed was the main page\\u2019s default title and description.\"), mdx(\"p\", null, \"I mentioned that we had a marketing site, a dapp, and a docs site. Each one of these was a separate application that was deployed independently. The Dark Emblem team is small, and this level of complexity was getting difficult to maintain.\"), mdx(\"p\", null, \"We migrated the three single page applications to a single NextJS application that we use to partially server side render our application. This new structure lets us deploy one application that servers all of our needs for our UI, but still only sends the JS necessary to hydrate the page and make it interactive.\"), mdx(\"h2\", null, \"Technical challenges\"), mdx(\"p\", null, \"Our other struggles have been more general: the applications and services getting hard to maintain and deploy, harder to split up parts of the application and still maintain code, and it getting harder to maintain costs.\"), mdx(\"p\", null, \"While each one of these required a lot of technical work to restructure the code with NextJS and with our new server package called propel, another major change was moving from Lerna to Nx. Nx let us split up our services into modules that we could re-use and deploy.\"), mdx(\"h2\", null, \"Propelling forward\"), mdx(\"p\", null, \"There was a lot of work throughout 2022 to 2023 to rewrite Dark Emblem to where it is today. We simplified our services to keep costs down. Nx let us split our application up into re-usable modules, simplifying our dev workflow. NextJS let us create a UI application to better suit our use-cases. And dfuse let us build a more realtime experience for our applications.\"), mdx(\"p\", null, \"We are looking forward to a great 2023 and beyond!\"), mdx(\"p\", null, \"Join us on \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.darkemblem.com\"\n  }, \"Dark Emblem\"), \".\"), mdx(\"h2\", null, \"Related articles\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://www.darkemblem.com/blog/post/2023-04-02-new-site-released\"\n  }, \"Dark Emblem Blog Announcement\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://idmontie.github.io/blog/post/2023-04-02-dark-emblem-rewrite\"\n  }, \"Technical Announcement\"))));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Dark Emblem Rewrite","date":"April 02, 2023","description":null,"noTitle":null,"image":null},"fields":{"slug":"/blog/04-02-2023-dark-emblem-update/"}}},"pageContext":{"slug":"/blog/04-02-2023-dark-emblem-update/","previous":{"id":"ffdb4ada-9fb0-5175-94e1-c3fdf75aae5e","body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"Sora VS Code Release\",\n  \"date\": \"2023-04-02T00:00:00.000Z\",\n  \"color\": \"white\",\n  \"backgroundColor\": \"rgb(45,69, 104)\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"We are happy to introduce Sora, a Visual Studio Code extension that integrates ChatGPT into your editor. While Github Copilot is useful for in-line auto-complete while you are writing code, Sora excels at writing whole files.\"), mdx(\"p\", null, \"We created the extension to compliment Github Copilot. Our goal with Sora is to boost productivity by letting users write specifications and reference files to write code, rather than autocomplete while writing.\"), mdx(\"h2\", null, \"Features\"), mdx(\"p\", null, \"Sora integrates into you Visual Studio Code environment. When you write a comment, you can hover over the comment and click \\u201CSend to ChatGPT\\u201D. This will take your comment, along with our wrapping prompt, and send it to ChatGPT. The response is parsed and the code is then entered into your file.\"), mdx(\"p\", null, mdx(\"img\", {\n    parentName: \"p\",\n    \"src\": \"/5c37e111acd20662a133e0023bb6b0d5/sora-hover.gif\",\n    \"alt\": \"Sora hover\"\n  })), mdx(\"p\", null, \"You can also type \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"@ChatGPT\"), \" within a comment to send it to ChatGPT as well. The biggest benefit is that file links are also pulled into the prompt for ChatGPT to use as a reference. For example you can say \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Use [my test file](./Component.test.tsx) as the tests that this component should pass.\"), \" This will take the contents of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Component.test.tsx\"), \" and send it as part of the prompt.\"), mdx(\"p\", null, \"Using this extension lets users write specifications as comments, and have ChatGPT write the entire file for you.\"), mdx(\"p\", null, mdx(\"img\", {\n    parentName: \"p\",\n    \"src\": \"/47791d2f7d2ecb5c81d24dfe8f7fa1b1/simple-sora.gif\",\n    \"alt\": \"Sora Demo\"\n  })), mdx(\"h2\", null, \"Installation and Usage\"), mdx(\"p\", null, \"You can install the extension by going to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://marketplace.visualstudio.com/items?itemName=CapsuleCat.sora-by-capsule-cat\"\n  }, \"the VSCode Marketplace\"), \", or searching for \\u201CSora\\u201D in Visual Studio Code extensions.\"), mdx(\"p\", null, \"Once installed, you will need to enter your own OpenAI API key. You can get your key by following \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key\"\n  }, \"these instructions\"), \". Then just enter \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Sora: Set API Key\"), \" into the Visual Studio Code command prompt.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"640px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/f4e6dc84dc181d77f8616e3aeed7ea29/c4451/api-key.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"11.249999999999998%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/svg+xml,%3csvg%20xmlns=\\\\'http://www.w3.org/2000/svg\\\\'%20width=\\\\'400\\\\'%20height=\\\\'45\\\\'%20viewBox=\\\\'0%200%20400%2045\\\\'%20preserveAspectRatio=\\\\'none\\\\'%3e%3cpath%20d=\\\\'M0%2023v22h401V0H0v23\\\\'%20fill=\\\\'%23d3d3d3\\\\'%20fill-rule=\\\\'evenodd\\\\'/%3e%3c/svg%3e')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"picture\", {\n    parentName: \"a\"\n  }, \"\\n          \", mdx(\"source\", {\n    parentName: \"picture\",\n    \"srcSet\": [\"/static/f4e6dc84dc181d77f8616e3aeed7ea29/60a22/api-key.webp 160w\", \"/static/f4e6dc84dc181d77f8616e3aeed7ea29/4c812/api-key.webp 320w\", \"/static/f4e6dc84dc181d77f8616e3aeed7ea29/0ba47/api-key.webp 640w\", \"/static/f4e6dc84dc181d77f8616e3aeed7ea29/e46b2/api-key.webp 960w\", \"/static/f4e6dc84dc181d77f8616e3aeed7ea29/af3f0/api-key.webp 1280w\", \"/static/f4e6dc84dc181d77f8616e3aeed7ea29/a7dc3/api-key.webp 1450w\"],\n    \"sizes\": \"(max-width: 640px) 100vw, 640px\",\n    \"type\": \"image/webp\"\n  }), \"\\n          \", mdx(\"source\", {\n    parentName: \"picture\",\n    \"srcSet\": [\"/static/f4e6dc84dc181d77f8616e3aeed7ea29/69538/api-key.png 160w\", \"/static/f4e6dc84dc181d77f8616e3aeed7ea29/72799/api-key.png 320w\", \"/static/f4e6dc84dc181d77f8616e3aeed7ea29/6af66/api-key.png 640w\", \"/static/f4e6dc84dc181d77f8616e3aeed7ea29/d9199/api-key.png 960w\", \"/static/f4e6dc84dc181d77f8616e3aeed7ea29/21b4d/api-key.png 1280w\", \"/static/f4e6dc84dc181d77f8616e3aeed7ea29/c4451/api-key.png 1450w\"],\n    \"sizes\": \"(max-width: 640px) 100vw, 640px\",\n    \"type\": \"image/png\"\n  }), \"\\n          \", mdx(\"img\", {\n    parentName: \"picture\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"src\": \"/static/f4e6dc84dc181d77f8616e3aeed7ea29/6af66/api-key.png\",\n    \"alt\": \"Sora API Key\",\n    \"title\": \"Sora API Key\",\n    \"loading\": \"lazy\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    }\n  }), \"\\n        \"), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"You can review the code \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/CapsuleCat/sora-by-capsule-cat\"\n  }, \"on Github\"), \".\"), mdx(\"h2\", null, \"Conclusion\"), mdx(\"p\", null, \"We are excited to share this VSCode extension! We\\u2019ve been using it for \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/blog/04-02-2023-dark-emblem-update\"\n  }, \"Dark Emblem\"), \" and in various other projects.\"), mdx(\"p\", null, \"Please feel free to reach out on our Github for feedback or questions.\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"We are happy to introduce Sora, a Visual Studio Code extension that integrates ChatGPT into your editor. While Github Copilot is useful for…","frontmatter":{"title":"Sora VS Code Release","description":null,"date":"02 April, 2023","color":"white","backgroundColor":"rgb(45,69, 104)","image":null},"fields":{"slug":"/blog/04-04-2023-sora-release/"}},"next":null,"site":{"siteMetadata":{"siteUrl":"https://capsulecat.com"}},"node":{"id":"e0594643-9dda-5611-9c04-88b37297456d","body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"Dark Emblem Rewrite\",\n  \"date\": \"2023-04-02T00:00:00.000Z\",\n  \"color\": \"white\",\n  \"backgroundColor\": \"rgb(19, 27, 38)\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Going into 2023, Dark Emblem - an NFT card game where you can collect cards and participate in raids\\xA0\\u2013 was having a few issues. Keeping the UI application in sync with the latest blockchain blocks was turning out to be difficult.\"), mdx(\"p\", null, \"Users were reporting that while the WAX Dark Emblem contact was working correctly, the UI would show the incorrect state of their cards. Even if the blockchain is working correctly, not showing that cards had been transferred to their owners because of syncing issues did not bring any peace of mind.\"), mdx(\"h2\", null, \"Server issues\"), mdx(\"p\", null, \"What exact issues were we experiencing? The problems with inconsistent data can be split into two parts: bad APIs, and a pull mechanism to sync data from the blockchain. There are multiple WAX blockchain nodes that can be queries via a REST API. The issue here is that these nodes are community maintained, which means some nodes end up being outdated and not offering the most up-to-date APIs, some nodes end up randomly going down, and some nodes end up adding their own rate-limits. This made displaying data on the UI a big issue, since it was it out of our control on how stable the APIs we used to query blockchain state were.\"), mdx(\"p\", null, \"We also had an issue where we would pull data from any available WAX API nodes on a set interval, but because of the nodes\\u2019 instabilities, combined with some nodes being out of date, we would have to rely on APIs that were generally available. This came with its own set of issues, where older APIs were difficult to consume, especially for traversing the blockchain history.\"), mdx(\"p\", null, \"Combating these issues was two-fold. One, we now let users pick their preferred WAX API node when they log in. This is similar to how other WAX based games behave as well.\"), mdx(\"p\", null, \"The other issue was that we relied on a pull mechanism. This has been completely replaced with using a push based mechanism via dfuse API. A lot of the work on our dfuse integration was built upon some joint work we did with another WAX discord server.\"), mdx(\"h2\", null, \"UI problems\"), mdx(\"p\", null, \"The original UI was built as a set of single page applications. While this let us iterate quickly and deploy new app like our marketing site, dapp, and docs, it showed quite a few problems as we continued building.\"), mdx(\"p\", null, \"Sharing and interacting with the community is a huge part of any blockchain project. The issue is that single page applications built with create-react-app don\\u2019t provide a mechanism to set the social share data that is necessary to have links show up with nice previews. So when a user went to share their awesome new card, all the preview showed was the main page\\u2019s default title and description.\"), mdx(\"p\", null, \"I mentioned that we had a marketing site, a dapp, and a docs site. Each one of these was a separate application that was deployed independently. The Dark Emblem team is small, and this level of complexity was getting difficult to maintain.\"), mdx(\"p\", null, \"We migrated the three single page applications to a single NextJS application that we use to partially server side render our application. This new structure lets us deploy one application that servers all of our needs for our UI, but still only sends the JS necessary to hydrate the page and make it interactive.\"), mdx(\"h2\", null, \"Technical challenges\"), mdx(\"p\", null, \"Our other struggles have been more general: the applications and services getting hard to maintain and deploy, harder to split up parts of the application and still maintain code, and it getting harder to maintain costs.\"), mdx(\"p\", null, \"While each one of these required a lot of technical work to restructure the code with NextJS and with our new server package called propel, another major change was moving from Lerna to Nx. Nx let us split up our services into modules that we could re-use and deploy.\"), mdx(\"h2\", null, \"Propelling forward\"), mdx(\"p\", null, \"There was a lot of work throughout 2022 to 2023 to rewrite Dark Emblem to where it is today. We simplified our services to keep costs down. Nx let us split our application up into re-usable modules, simplifying our dev workflow. NextJS let us create a UI application to better suit our use-cases. And dfuse let us build a more realtime experience for our applications.\"), mdx(\"p\", null, \"We are looking forward to a great 2023 and beyond!\"), mdx(\"p\", null, \"Join us on \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.darkemblem.com\"\n  }, \"Dark Emblem\"), \".\"), mdx(\"h2\", null, \"Related articles\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://www.darkemblem.com/blog/post/2023-04-02-new-site-released\"\n  }, \"Dark Emblem Blog Announcement\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://idmontie.github.io/blog/post/2023-04-02-dark-emblem-rewrite\"\n  }, \"Technical Announcement\"))));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Going into 2023, Dark Emblem - an NFT card game where you can collect cards and participate in raids – was having a few issues. Keeping the…","frontmatter":{"title":"Dark Emblem Rewrite","description":null,"date":"02 April, 2023","color":"white","backgroundColor":"rgb(19, 27, 38)","image":null},"fields":{"slug":"/blog/04-02-2023-dark-emblem-update/"}}}},"staticQueryHashes":["2841359383","606982168"]}